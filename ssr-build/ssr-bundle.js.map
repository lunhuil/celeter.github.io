{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./routes/home/style.css","webpack:///./utils.js","webpack:///external \"preact\"","webpack:///./index.js","webpack:///./components/header/index.js","webpack:////home/runner/work/build/build/${github.workspace}/imgcomic/index.js","webpack:///./components/app.js","webpack:///./routes/home/index.jsx","webpack:///./components/header/style.css"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","GetImage","url","Promise","resolve","reject","img","Image","onload","console","log","onerror","src","require","App","Header","class","style","header","Render","canvas","ctx","getContext","s_w","width","w","naturalWidth","h","naturalHeight","height","remainder","parseInt","copyW","copyH","Math","floor","py","y","drawImage","NewCanvas","document","createElement","id","path","Home","props","state","old_url","onSubmit","trim","length","then","res","current","imgcomic","setState","handleChange","event","target","preact","render","home","this","onChange","onClick","overflow","ref"],"mappings":"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","file":"ssr-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"QfWi\");\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"home__MseGd\"};","export function GetImage(url) {\n  return new Promise(function (resolve, reject) {\n    var img = new Image()\n    img.onload = function () {\n      console.log(\"加载成功了\")\n      resolve(img)\n    }\n    img.onerror = function () {\n      console.log(\"发生什么事了?\")\n      reject(url)\n    }\n    img.src = url\n  })\n}","module.exports = require(\"preact\");","import './style';\nimport App from './components/app';\n\nexport default App;\n","import style from './style.css';\n\nconst Appname = \"禁漫天堂图片下载\"\n\nconst Header = () => (\n\t<header class={style.header}>\n\t\t<h1>{ Appname }</h1>\n\t</header>\n);\n\nexport default Header;\n","const jpgMine = \"image/jpeg\"\n\n// const b64 = c => {\n//   const b = c.toDataURL()\n//   return b\n// }\n\n/**\n * 将图片转为 `base64`\n * @param {any} img 图片元素(element)\n */\n// const NewImage = (img)=> {\n//   const c = NewCanvas(img)\n//   return b64(c)\n// }\n\n/**\n * 在画布上渲染正确的\n * @param {any} canvas 元素\n */\nconst Render = (canvas, img) =>{\n  const ctx = canvas.getContext('2d');\n  let s_w = img.width;\n  let w = img.naturalWidth;\n  let h = img.naturalHeight;\n\n  canvas.width = w;\n  canvas.height = h;\n\n  canvas.style.width = s_w + \"px\";\n\n  let num = 10;\n  let remainder = parseInt(h % num);\n  const copyW = w;\n\n  for (var i = 0; i < num; i++) {\n    let copyH = Math.floor(h / num);\n    let py = copyH * (i);\n    let y = h - (copyH * (i + 1)) - remainder; \n    if (i == 0) {\n      copyH = copyH + remainder;\n    } else {\n      py = py + remainder;\n    }\n    ctx.drawImage(img, 0, y, copyW, copyH, 0, py, copyW, copyH);\n  }\n}\n\n/**\n * 创建一个画布,渲染正确的`img`图片\n * @param {any} img 图片元素(element)\n */\nconst NewCanvas = (img)=> {\n  let canvas = document.createElement('canvas');\n  Render(canvas, img)\n  return canvas\n}\n\nmodule.exports = {\n  NewCanvas,\n  Render,\n}","import Header from './header';\n\nimport Home from '../routes/home/index';\n\nconst App = () => (\n\t<div id=\"app\">\n\t\t<Header />\n\t\t<Home path=\"/\" />\n\t</div>\n)\n\nexport default App;\n","import * as preact from \"preact\"\nimport { GetImage } from \"../../utils\"\nimport style from \"./style.css\"\nimport imgcomic from \"imgcomic\"\n\nclass Home extends preact.Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.canvas = preact.createRef();\n\t}\n\n\tstate = {\n\t\turl: \"\",\n\t\told_url: \"\",\n\t}\n\n\tonSubmit = () => {\n\t\tconst url = this.state.url\n\t\tconst _url = url.trim()\n\t\tif (!_url.length || url == this.state.old_url) return\n\t\tGetImage(url)\n\t\t\t.then(res => {\n\t\t\t\tconst canvas = this.canvas.current\n\t\t\t\timgcomic.Render(canvas, res)\n\t\t\t\tthis.setState({\n\t\t\t\t\told_url: url\n\t\t\t\t})\n\t\t\t})\n\t}\n\n\thandleChange = (event)=> {\n\t\tconst url = event.target.value\n\t\tthis.setState({\n\t\t\turl\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div class={style.home}>\n\t\t\t\t<p><strong style=\"color: pink\"># </strong>粘贴图片`url`地址即可</p>\n\t\t\t\t<input value={this.state.url} onChange={this.handleChange} />\n\t\t\t\t<button style=\"margin-left: 20px\" onClick={this.onSubmit}>转换</button>\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t\t<div style={{\n\t\t\t\t\t// width: `80%vw`,\n\t\t\t\t\theight: `320px`,\n\t\t\t\t\toverflow: `auto`\n\t\t\t\t}}>\n\t\t\t\t\t<canvas ref={this.canvas} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Home;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header__3QGkI\",\"active\":\"active__3gItZ\"};"],"sourceRoot":""}